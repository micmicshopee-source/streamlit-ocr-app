# 台灣上線檢查與規劃

**文件類型**：產品經理檢查報告 + 上線規劃  
**適用對象**：台灣上班族、行政與財務人員  
**更新日期**：2026-01-29

---

## 一、現有網頁功能總覽

### 1.1 核心功能

| 功能 | 說明 | 狀態 |
|------|------|------|
| **發票 OCR 辨識** | 上傳發票/收據圖片，以 Gemini AI 辨識欄位（日期、發票號碼、賣方、金額、稅額等） | ✅ 可用 |
| **CSV/Excel 導入** | 批次導入既有發票資料（支援模板下載） | ✅ 可用 |
| **發票資料表** | 查詢、篩選、編輯、刪除單筆；進階篩選（會計科目、類型、金額） | ✅ 可用 |
| **本期數據總覽** | 本月總計、預計稅額、發票總數、缺失件數（四張指標卡） | ✅ 可用 |
| **導出** | 導出 CSV、PDF（含公司資訊、僅當前用戶資料） | ✅ 可用 |
| **AI 報帳小助理** | 對話式報帳：一句話記帳、問會計科目與操作 | ✅ 可用（需 API Key） |

### 1.2 登入與權限

- **多用戶隔離**：每人僅能看見、編輯、導出、刪除自己的資料。
- **登入方式**：見下方「登入方式清單」。

### 1.3 邏輯與資料流

- **資料來源**：SQLite（`invoices_v2.db`），依 `user_email` 隔離。
- **流程**：上傳圖片/CSV → AI 辨識或解析 → 寫入 DB → 表格編輯/篩選 → 導出 CSV/PDF。
- **API**：Gemini API Key 可放在 Secrets 或側邊欄手動輸入；模型可選（如 gemini-2.0-flash）。

### 1.4 排版與設計

- **主題**：Material 3 深色（`theme_m3_responsive.css`）。
- **主頁**：標題區 → 三步驟導引（上傳 / 辨識與校正 / 導出）→ 本期數據總覽 → 發票表格（可編輯、篩選、刪除）。
- **側邊欄（改版前）**：系統狀態、當前用戶、登出、API Key、辨識模型、資料庫狀態、已存筆數。（改版後改為「小工具導航」，見下。）

---

## 二、登入方式清單（台灣上線可用）

| 登入方式 | 說明 | 目前狀態 |
|----------|------|----------|
| **電子郵件 + 密碼** | 本站註冊帳號，密碼至少 6 字元 | ✅ 可用 |
| **忘記密碼** | 僅限「本站註冊」帳號可重設；Secrets 帳號需聯繫管理員 | ✅ 可用 |
| **Streamlit Secrets** | 在 `.streamlit/secrets.toml` 設定 `USERS`（email:password） | ✅ 可用 |
| **環境變數** | 系統環境變數 `USERS`（多行 email:password） | ✅ 可用 |
| **Google 登入** | 按鈕已存在，後端未接 | 🔜 開發中 |

**建議台灣用語**：登入（不用「登錄」）、電子郵件/信箱、密碼、註冊、重設密碼、登出。

---

## 三、台灣登入介面設計要點

- **標題**：改為「上班族小工具」或「發票報帳・辦公小幫手」等，副標可寫「登入以使用發票報帳與更多工具」。
- **用語**：全部改為台灣慣用（登入、註冊、電子郵件、密碼、重設密碼、登出）。
- **版面**：維持置中卡片式，可加一句「您的資料僅供您本人使用，我們不會分享給第三方」以符合台灣個資觀感。
- **選項**：登入 / 註冊 並列；忘記密碼、Google 登入（開發中）保留並標註狀態。

---

## 四、左側導航改版：移除「系統狀態」、改為小工具選單

### 4.1 移除項目

- 標題「⚙️ 系統狀態」。
- 資料庫狀態（本地磁碟/記憶體）、已存筆數、嘗試切換文件模式等技術資訊。

### 4.2 新側邊欄結構

1. **小工具選單**（主要導航）
   - 📑 發票報帳小秘笈（預設）
   - ⚖️ AI 合約比對（規劃）
   - 📧 AI 客服小秘（規劃）
   - 📅 AI 會議精華（規劃）
   - （其餘建議工具見下方，可再擴充）

2. **帳號區**
   - 顯示當前用戶（電子郵件）。
   - 登出按鈕。

3. **設定區**（可收合）
   - Gemini API Key（或顯示「已使用 Secrets 金鑰」）。
   - 辨識模型選單。
   - 不再顯示資料庫/筆數等系統狀態。

主內容區依「目前選中的小工具」切換；未開發的工具先顯示「即將推出」或「開發中」說明頁。

---

## 五、建議的台灣辦公／行政／財務小工具

在「發票報帳」「AI 合約比對」「AI 客服小秘」「AI 會議精華」之外，可考慮以下方向（皆為台灣上班族常見情境）：

| 圖示 | 工具名稱 | 說明 |
|------|----------|------|
| 📑 | 發票報帳小秘笈 | 現有：OCR、導入、報表、AI 小助理 |
| ⚖️ | AI 合約比對 | 上傳兩份合約/條款，AI 標示差異與重點 |
| 📧 | AI 客服小秘 | 代擬回覆、整理客訴重點、常見問答建議 |
| 📅 | AI 會議精華 | 上傳逐字稿或錄音轉文字，產出結論與待辦 |
| 📋 | 請購／報價單整理 | 多張請購單或報價單欄位辨識、彙整成表 |
| 🧾 | 差旅費試算 | 輸入機票、住宿、每日餐費等，自動依公司規則試算與分類 |
| 📊 | 預算 vs 實際 | 上傳預算表與實際支出，AI 協助對比與標註差異 |
| 🗂️ | 檔案命名小幫手 | 依內容或規則建議統一檔名（如：日期_案名_版本） |
| 📎 | 收發文登記 | 簡單的收文/發文登錄與查詢（可接 AI 摘要） |
| 💰 | 零用金／代墊結算 | 登錄代墊項目與金額，產出結算表供報帳 |

以上可依資源分階段上線，優先保留「發票報帳」「AI 合約比對」「AI 客服小秘」「AI 會議精華」，其餘列在導航為「即將推出」或第二波清單。

---

## 六、功能／邏輯／排版／設計整理表

| 項目 | 現狀 | 上線前調整 |
|------|------|------------|
| **功能** | 發票 OCR、導入、表格、導出、AI 小助理完整 | 左側改為小工具導航；其餘工具先做佔位頁 |
| **邏輯** | 多用戶隔離、DB 寫入、API Key/Secrets | 維持；僅隱藏技術狀態不顯示在側欄 |
| **排版** | 主區三步驟 + 總覽 + 表格；側欄系統狀態 | 側欄改為工具選單 + 帳號 + 設定收合 |
| **設計** | Material 3 深色、響應式 | 登入頁改台灣用語與標題；可加隱私一句話 |
| **登入** | 信箱/密碼、註冊、忘記密碼、Secrets、環境變數 | 文案改為台灣用語；Google 標註開發中 |

---

## 七、上線前檢查清單

- [ ] 登入頁：標題與全部文案改為台灣用語。
- [ ] 側邊欄：移除「系統狀態」及資料庫/筆數顯示；改為小工具選單 + 帳號 + API Key/模型收合。
- [ ] 主內容：依所選工具切換（發票報帳 = 現有頁面；其餘 = 開發中說明）。
- [ ] 登入方式：產品說明/說明頁列出「電子郵件+密碼、忘記密碼、Secrets、環境變數」，並註明 Google 登入規劃中。
- [ ] 新工具：至少保留「發票」「合約比對」「客服小秘」「會議精華」四個入口，其餘可列在「更多小工具（規劃中）」。

以上完成後，即為適合台灣人登入、並可擴充多項上班族小工具的介面與架構。
