# 發票對獎 UI 精簡佔用空間方案

## 一、現狀佔用空間

| 區塊 | 內容 | 佔用 |
|------|------|------|
| 標題與說明 | 🎰 發票對獎 + caption | 約 2 行 |
| 對獎結果 | 一句摘要 + **整張中獎明細表**（dataframe） | 摘要 1 行 + 表格 N 行 |
| 本期開獎號碼 | 分隔線 + 標題 + 特別獎/特獎/頭獎 + 領獎期限 | 約 4～5 行 |
| 按鈕列 | 說明 + 兩個按鈕（2 欄） | 約 2 行 |
| 手動區 | expander（收合） | 收合時 1 行 |

主要佔空間：**中獎明細表**（多筆時很高）、**本期開獎號碼**（固定多行）、**按鈕列**。

---

## 二、精簡原則

- **預設只給一句結果**：有無中獎、張數、金額、領獎期限，一眼看懂。
- **明細與開獎號碼收合**：需要再展開，減少常駐高度。
- **按鈕精簡**：可收合或改為單行小按鈕。

---

## 三、方案選項

### 方案 A：結果一句 + 明細與開獎號碼收合（推薦）

| 區塊 | 調整 |
|------|------|
| 對獎結果 | **只常駐一句摘要**（例：「114年11-12月 對獎 27 張，中獎 2 張，共 400 元。領獎至 115/5/5」）。 |
| 中獎明細表 | 改為 **expander「查看中獎明細」**，預設收合；有中獎時才顯示該 expander。 |
| 本期開獎號碼 | 改為 **expander「本期開獎號碼」**，預設收合。 |
| 按鈕 | 維持兩顆，可改為 **同一行**（不另起 caption），或收合在「重新對獎」expander 內。 |

**預估**：常駐從「摘要 + 整表 + 開獎號碼 + 按鈕」改為「摘要 + 按鈕 + 兩個收合 expander」，高度約剩 1/3～1/2。

---

### 方案 B：整區收合為一個 expander

- 整個「🎰 發票對獎」改為 **一個 expander**。
- **標題列**顯示摘要：例如「🎰 發票對獎：中獎 2 張共 400 元」或「🎰 發票對獎：未中獎」。
- 點開後才顯示：明細表、本期開獎號碼、按鈕、手動備用。

**優點**：主頁面幾乎不佔高。**缺點**：對獎資訊需點開才看到，適合「對獎非主流程」的版面。

---

### 方案 C：單行精簡條 + 詳情收合

- **常駐只留一行**：例如 `🎰 114年11-12月 對獎27張 中獎2張 共400元 · 領獎至115/5/5 [查看明細] [本期開獎]`，其中「查看明細」「本期開獎」為小連結或按鈕，點開用 **st.popover** 或 **expander** 顯示明細／開獎號碼。
- 按鈕（重新對獎、對上一期）收合在「重新對獎」內或放在該行右側。

**優點**：佔用極少。**缺點**：實作與資訊層級較細，需取捨欄位。

---

## 四、建議採用（方案 A 具體規格）

1. **常駐區**（由上到下）  
   - 一句摘要：`**{期別}** 對獎 {N} 張，中獎 {M} 張，共 {金額} 元。領獎期限至 {日期}` 或 `對獎 {N} 張，未中獎。`  
   - 失敗時：`自動對獎失敗：{原因}。請點「重新對獎」或使用手動貼上。`  
   - 一行按鈕：「對獎（最新一期）」 「對獎（上一期）」 同一行，可不另寫 caption。

2. **收合 1：查看中獎明細**  
   - 僅當「有中獎」時顯示此 expander，預設收合。  
   - 內容：中獎明細表（dataframe）。

3. **收合 2：本期開獎號碼**  
   - 有對獎結果時顯示，預設收合。  
   - 內容：特別獎、特獎、頭獎、領獎期間。

4. **手動貼上**  
   - 維持現有 expander「手動貼上開獎號碼（備用）」，預設收合。

5. **標題**  
   - 維持「🎰 發票對獎」，可不加額外 caption，以節省一行。

---

## 五、小結

| 項目 | 建議 |
|------|------|
| 對獎結果 | 常駐**一句摘要**，其餘收合。 |
| 中獎明細表 | **expander「查看中獎明細」**，有中獎才顯示，預設收合。 |
| 本期開獎號碼 | **expander「本期開獎號碼」**，預設收合。 |
| 按鈕 | 同一行、可不另 caption，或收合在「重新對獎」內（擇一）。 |
| 手動區 | 維持 expander，預設收合。 |

依此可明顯減少中獎 UI 常駐高度，需要時再展開明細與開獎號碼。
