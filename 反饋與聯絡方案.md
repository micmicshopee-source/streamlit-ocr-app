# 反饋意見與郵件聯繫方案

---

## 一、需求說明

1. **反饋意見**：讓用戶可提交建議、問題回報
2. **郵件聯繫**：在隱私政策、條款等處提供明確聯絡方式，符合 Google OAuth 等審核要求

---

## 二、方案對照

| 方案 | 反饋方式 | 聯絡方式 | 複雜度 | 適用情境 |
|------|----------|----------|--------|----------|
| A. 最簡 | mailto 連結 | 靜態 email | 低 | 快速上線、無後端 |
| B. 表單 + 郵件 | 表單填寫後寄信 | 同上 | 中 | 需記錄反饋內容 |
| C. 表單 + 資料庫 | 存入 DB，可後台查看 | 同上 | 高 | 需管理、統計反饋 |

---

## 三、建議實作（方案 A + 強化聯絡資訊）

### 1. 聯絡信箱設定

在 `.streamlit/secrets.toml` 新增（可選）：

```toml
# 聯絡與反饋
CONTACT_EMAIL = "support@getaiinvoice.com"
```

若未設定，使用預設值（如 `contact@getaiinvoice.com`）。

### 2. 修改位置

| 位置 | 內容 |
|------|------|
| `static/privacy.html` | 「聯絡我們」改為可點擊 mailto 連結 |
| `app.py` 的 `PRIVACY_POLICY` | 同上，加入 email 連結 |
| `app.py` 的 `TERMS_OF_SERVICE` | 加入「聯絡我們」與 email |
| 側邊欄（登入後） | 新增「💬 反饋意見」按鈕，點擊展開 mailto 或簡易表單 |
| 頁尾（可選） | 顯示「聯絡我們：xxx@xxx.com」 |

### 3. 隱私政策「聯絡我們」範例

**修改前：**
> 如有隱私相關問題，請透過系統管理員聯繫。

**修改後：**
> 如有隱私相關問題，請來信：[support@getaiinvoice.com](mailto:support@getaiinvoice.com)

### 4. 側邊欄反饋按鈕

在 `st.sidebar` 底部加入：

```
💬 反饋意見
點擊後可：
- 選項 A：直接開啟 mailto（最簡）
- 選項 B：展開表單（主旨、內容），送出時開啟 mailto 預填
```

---

## 四、方案 B：表單寄信（需 SMTP）

若已有 SMTP 設定（如密碼重設發信），可擴充：

1. 反饋表單欄位：主旨、內容、類型（建議/問題/其他）
2. 送出後呼叫 `smtplib` 寄到 `CONTACT_EMAIL`
3. 成功後顯示 `st.success("已送出，感謝您的反饋")`

**注意**：需在 secrets 設定 SMTP 相關參數。

---

## 五、方案 C：資料庫儲存（進階）

依 PRD 的 `feedback` 表結構：

- 新增 `feedback` 表
- 表單送出後寫入 DB
- 管理員可於後台或直接查 DB 查看

適合需要統計、追蹤、回覆的場景。

---

## 六、實作檢查清單（方案 A）

- [x] 在 `secrets.toml` 新增 `CONTACT_EMAIL`（或使用預設 contact@getaiinvoice.com）
- [x] 修改 `static/privacy.html` 的「聯絡我們」為 mailto
- [x] 修改 `app.py` 的 `PRIVACY_POLICY`、`TERMS_OF_SERVICE` 加入 email
- [x] 在側邊欄加入「💬 反饋意見」按鈕（mailto）
- [ ] 可選：建立 `static/contact.html` 作為獨立聯絡頁（供 Nginx 掛載）

> **注意**：`static/privacy.html` 使用固定信箱 `contact@getaiinvoice.com`，若需不同信箱請手動修改該檔。

---

## 七、Google OAuth 審核注意

審核時常會檢查：

- 隱私政策有明確聯絡方式（email 或表單）
- 聯絡方式可正常使用

建議至少提供一個可點擊的 mailto 連結。
