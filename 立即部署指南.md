# 立即部署指南

**日期**: 2026-01-26  
**狀態**: 🚀 準備部署

---

## 🎯 快速部署（推薦：Streamlit Cloud）

### 第一步：推送代碼到 GitHub

#### 方法 A：使用提供的腳本（最簡單）

**Windows 批處理**:
```bash
# 雙擊運行
git_push.bat
```

**PowerShell**:
```powershell
.\git_push.ps1
```

#### 方法 B：手動執行命令

```powershell
cd d:\streamlit_ocr_app

# 刪除鎖定文件（如果存在）
Remove-Item .git\index.lock -ErrorAction SilentlyContinue

# 添加關鍵文件
git add app.py requirements.txt .gitignore Dockerfile docker-compose.yml

# 提交
git commit -m "Update: 增加多用戶隔離、登錄註冊功能與 PDF 導出優化"

# 推送
git push origin main
```

---

### 第二步：在 Streamlit Cloud 部署

#### 1. 訪問 Streamlit Cloud
- 網址：**https://share.streamlit.io**
- 使用 **GitHub 帳號**登錄

#### 2. 創建新應用
1. 點擊 **"New app"** 按鈕
2. 選擇您的 **GitHub 倉庫**
3. 設置配置：
   - **Main file path**: `app.py`
   - **Branch**: `main`
   - **App URL**: （可選，自定義 URL）

#### 3. 配置 Secrets（重要！）
1. 點擊 **"Advanced settings"**
2. 在 **"Secrets"** 區域點擊 **"Edit secrets"**
3. 添加以下內容：
   ```toml
   GEMINI_API_KEY = "your-api-key-here"
   ```
   ⚠️ **替換 `your-api-key-here` 為您的實際 API Key**

#### 4. 部署
1. 點擊 **"Deploy"** 按鈕
2. 等待 **1-2 分鐘** 部署完成
3. 部署成功後會獲得應用 URL，例如：
   ```
   https://your-app-name.streamlit.app
   ```

---

### 第三步：驗證部署

#### 必須測試的功能
1. ✅ **訪問應用 URL**
   - 確認應用可以正常加載

2. ✅ **測試註冊功能**
   - 創建一個新帳號
   - 確認註冊成功

3. ✅ **測試登錄功能**
   - 使用註冊的帳號登錄
   - 確認登錄成功

4. ✅ **測試 OCR 識別**
   - 上傳一張發票圖片
   - 確認識別功能正常

5. ✅ **測試數據操作**
   - 測試數據編輯
   - 測試數據刪除
   - 測試數據導出（CSV/PDF）

---

## 🔧 獲取 Gemini API Key

如果還沒有 API Key：

1. **訪問 Google AI Studio**
   - 網址：https://makersuite.google.com/app/apikey

2. **登錄 Google 帳號**

3. **創建 API Key**
   - 點擊 "Create API Key"
   - 選擇或創建 Google Cloud 項目
   - 複製生成的 API Key

4. **在 Streamlit Cloud 配置**
   - 將 API Key 添加到 Secrets

---

## 📋 部署檢查清單

### 部署前
- [ ] 代碼已推送到 GitHub
- [ ] 已獲取 Gemini API Key
- [ ] 已準備 Streamlit Cloud 帳號

### 部署中
- [ ] 已在 Streamlit Cloud 創建應用
- [ ] 已配置 Secrets（GEMINI_API_KEY）
- [ ] 已點擊 Deploy

### 部署後
- [ ] 應用可以正常訪問
- [ ] 註冊功能正常
- [ ] 登錄功能正常
- [ ] OCR 識別功能正常
- [ ] 數據操作功能正常

---

## 🆘 常見問題

### Q: 部署失敗？
**A**: 檢查：
- API Key 是否正確配置
- requirements.txt 是否完整
- 查看 Streamlit Cloud 的錯誤日誌

### Q: OCR 識別失敗？
**A**: 檢查：
- API Key 是否有效
- API Key 是否正確配置在 Secrets 中
- 網絡連接是否正常

### Q: 無法登錄？
**A**: 檢查：
- 是否已註冊帳號
- 密碼是否正確
- 數據庫是否正常初始化

---

## 📞 需要幫助？

查看詳細文檔：
- `部署快速開始.md` - 快速開始指南
- `部署執行指南_20260126.md` - 詳細部署步驟
- `上線部署指南_20260126.md` - 完整部署指南

---

**準備好了嗎？開始部署吧！** 🚀
