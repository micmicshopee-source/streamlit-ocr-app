# éƒ¨ç½²å‰æª¢æŸ¥å ±å‘Š

**æª¢æŸ¥æ—¥æœŸ**: 2026-01-26  
**æª¢æŸ¥é …ç›®**: ç’°å¢ƒä¾è³´ã€API Key å®‰å…¨æ€§ã€Git åŒæ­¥æº–å‚™

---

## âœ… æª¢æŸ¥çµæœ

### 1. requirements.txt ä¾è³´æª¢æŸ¥ âœ…

#### å·²åŒ…å«çš„åº«ï¼ˆå…¨éƒ¨æ­£ç¢ºï¼‰
- âœ… `streamlit>=1.28.0` - ä¸»æ¡†æ¶
- âœ… `google-generativeai>=0.3.0` - Gemini API
- âœ… `Pillow>=10.0.0` - åœ–åƒè™•ç†
- âœ… `requests>=2.31.0` - HTTP è«‹æ±‚
- âœ… `pandas>=2.0.0` - æ•¸æ“šè™•ç†
- âœ… `openpyxl>=3.1.0` - Excel æ–‡ä»¶æ”¯æŒï¼ˆç”¨æ–¼æ•¸æ“šå°å…¥ï¼‰
- âœ… `fpdf2>=2.7.0` - PDF å°å‡ºåŠŸèƒ½
- âœ… `altair>=5.0.0` - åœ–è¡¨ç”Ÿæˆ

#### å·²ç§»é™¤çš„æœªä½¿ç”¨åº«
- âŒ `supabase>=2.3.0` - **å·²ç§»é™¤**ï¼ˆä»£ç¢¼ä¸­æœªä½¿ç”¨ï¼‰
- âŒ `python-dotenv>=1.0.0` - **å·²ç§»é™¤**ï¼ˆä»£ç¢¼ä¸­æœªä½¿ç”¨ï¼‰

#### å…§ç½®åº«ï¼ˆç„¡éœ€å®‰è£ï¼‰
- `sqlite3` - Python å…§ç½®
- `hashlib` - Python å…§ç½®
- `json` - Python å…§ç½®
- `os`, `io`, `time`, `base64`, `datetime`, `shutil` - Python å…§ç½®

**çµè«–**: âœ… **æ‰€æœ‰å¿…éœ€çš„åº«éƒ½å·²åŒ…å«åœ¨ requirements.txt ä¸­**

---

### 2. API Key å®‰å…¨æ€§æª¢æŸ¥ âœ…

#### æª¢æŸ¥çµæœ
- âœ… **ç„¡ç¡¬ç·¨ç¢¼ API Key**: ä»£ç¢¼ä¸­æ²’æœ‰ç¡¬ç·¨ç¢¼çš„ API Key
- âœ… **ä½¿ç”¨ st.secrets**: å„ªå…ˆä½¿ç”¨ `st.secrets["GEMINI_API_KEY"]`
- âœ… **å®‰å…¨é™ç´š**: å¦‚æœæ²’æœ‰ Secretsï¼Œä½¿ç”¨ `st.text_input` è®“ç”¨æˆ¶æ‰‹å‹•è¼¸å…¥
- âœ… **é»˜èªå€¼ç‚ºç©º**: `DEFAULT_KEY = ""` æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œä¸æœƒæ´©éœ²ä»»ä½•ä¿¡æ¯

#### ä»£ç¢¼ä½ç½®
```python
# app.py:1137
DEFAULT_KEY = ""  # ç©ºå­—ç¬¦ä¸²ï¼Œå®‰å…¨

# app.py:1160-1166
if "GEMINI_API_KEY" in st.secrets:
    st.success("ğŸ”‘ å·²ä½¿ç”¨ Secrets é‡‘é‘°")
    api_key = st.secrets["GEMINI_API_KEY"]  # âœ… ä½¿ç”¨ Secrets
else:
    api_key = st.text_input("Gemini API Key", DEFAULT_KEY, type="password")
    # âœ… å¦‚æœæ²’æœ‰ Secretsï¼Œè®“ç”¨æˆ¶æ‰‹å‹•è¼¸å…¥
```

**çµè«–**: âœ… **API Key é…ç½®å®Œå…¨å®‰å…¨ï¼Œç„¡ç¡¬ç·¨ç¢¼é¢¨éšª**

---

### 3. Git åŒæ­¥æº–å‚™ âœ…

#### å·²ä¿®æ”¹çš„æ–‡ä»¶
- âœ… `.gitignore` - å·²æ›´æ–°ï¼Œç¢ºä¿æ•æ„Ÿæ–‡ä»¶ä¸æœƒè¢«æäº¤
- âœ… `app.py` - ç”Ÿç”¢ç‰ˆæœ¬ï¼Œå·²æ¸…ç†æ¸¬è©¦å…§å®¹
- âœ… `requirements.txt` - å·²æ›´æ–°ï¼Œç§»é™¤æœªä½¿ç”¨çš„åº«

#### æ–°å¢çš„éƒ¨ç½²æ–‡ä»¶
- âœ… `Dockerfile` - Docker éƒ¨ç½²é…ç½®
- âœ… `docker-compose.yml` - Docker Compose é…ç½®
- âœ… `éƒ¨ç½²å¿«é€Ÿé–‹å§‹.md` - å¿«é€Ÿéƒ¨ç½²æŒ‡å—
- âœ… `éƒ¨ç½²åŸ·è¡ŒæŒ‡å—_20260126.md` - è©³ç´°éƒ¨ç½²æ­¥é©Ÿ
- âœ… `éƒ¨ç½²æª¢æŸ¥æ¸…å–®_20260126.md` - éƒ¨ç½²æª¢æŸ¥æ¸…å–®

#### .gitignore ä¿è­·
å·²ç¢ºä¿ä»¥ä¸‹æ•æ„Ÿæ–‡ä»¶ä¸æœƒè¢«æäº¤ï¼š
- `invoices_v2.db` - æ•¸æ“šåº«æ–‡ä»¶
- `invoice_images/` - åœ–ç‰‡ç›®éŒ„
- `.streamlit/secrets.toml` - Secrets é…ç½®æ–‡ä»¶
- `*.db`, `*.db-journal` - æ‰€æœ‰æ•¸æ“šåº«æ–‡ä»¶

**çµè«–**: âœ… **Git åŒæ­¥æº–å‚™å®Œæˆï¼Œæ‰€æœ‰æ•æ„Ÿæ–‡ä»¶å·²ä¿è­·**

---

## ğŸ“‹ æª¢æŸ¥ç¸½çµ

### âœ… é€šéé …ç›®
1. âœ… æ‰€æœ‰å¿…éœ€çš„åº«éƒ½åœ¨ requirements.txt ä¸­
2. âœ… ç„¡ç¡¬ç·¨ç¢¼ API Keyï¼Œä½¿ç”¨ st.secrets
3. âœ… .gitignore å·²æ­£ç¢ºé…ç½®
4. âœ… ä»£ç¢¼å·²æ¸…ç†æ¸¬è©¦å…§å®¹
5. âœ… éƒ¨ç½²æ–‡æª”å·²æº–å‚™å®Œæˆ

### âš ï¸ æ³¨æ„äº‹é …
1. **API Key é…ç½®**: éƒ¨ç½²æ™‚éœ€è¦åœ¨ Streamlit Cloud Secrets æˆ–ç’°å¢ƒè®Šæ•¸ä¸­é…ç½® `GEMINI_API_KEY`
2. **é¦–æ¬¡ä½¿ç”¨**: ç”¨æˆ¶éœ€è¦è¨»å†Šå¸³è™Ÿï¼ˆç„¡é»˜èªæ¸¬è©¦å¸³è™Ÿï¼‰
3. **æ•¸æ“šå‚™ä»½**: å»ºè­°å®šæœŸå‚™ä»½ `invoices_v2.db` å’Œ `invoice_images/` ç›®éŒ„

---

## ğŸš€ ä¸‹ä¸€æ­¥

### Git æ¨é€å‘½ä»¤
```bash
git add .
git commit -m "Update: å¢åŠ å¤šç”¨æˆ¶éš”é›¢ã€ç™»éŒ„è¨»å†ŠåŠŸèƒ½èˆ‡ PDF å°å‡ºå„ªåŒ–"
git push origin main
```

### éƒ¨ç½²æ­¥é©Ÿ
1. ç¢ºèª GitHub å€‰åº«å·²æ›´æ–°
2. åœ¨ Streamlit Cloud é…ç½® Secrets: `GEMINI_API_KEY`
3. éƒ¨ç½²æ‡‰ç”¨
4. é©—è­‰æ‰€æœ‰åŠŸèƒ½æ­£å¸¸

---

**æª¢æŸ¥å®Œæˆæ™‚é–“**: 2026-01-26  
**æª¢æŸ¥ç‹€æ…‹**: âœ… **æ‰€æœ‰æª¢æŸ¥é€šéï¼Œå¯ä»¥éƒ¨ç½²**
